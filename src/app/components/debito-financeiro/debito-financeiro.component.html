<h2 class="titulo">Relatório Débito Financeiro</h2>
<mat-card style="background-color: #eaeaea;">
  <mat-card-content>
    <mat-form-field>
      <mat-select
        placeholder="Região"
        [(ngModel)]="filtroDto.zona.id"
        (selectionChange)="carregarNucleo()"
      >

      <div class="search-select-header">
        <input
          [(ngModel)]="filterRegiao.nome"  
          type="search" 
          name="filterRegiao" 
          placeholder="Search"
          (keydown)="onSearchChange($event)"
          class="search-header-searchbox">
      </div>
        
        <mat-option *ngFor="let zona of filtroDto.zonas | namefilter:filterRegiao" [value]="zona.id">
          {{ zona.id }} - {{ zona.nome }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-select
        placeholder="Nucleo"
        [(ngModel)]="filtroDto.nucleo.id"
        (selectionChange)="changeArea()"
      >
      <div class="search-select-header">
        <input
          [(ngModel)]="filterNucleo.nome"  
          type="search" 
          name="filterRegiao" 
          placeholder="Search"
          (keydown)="onSearchChange($event)"
          class="search-header-searchbox">
      </div>
        <mat-option
          *ngFor="let nucleo of filtroDto.nucleos | namefilter:filterNucleo" [value]="nucleo.id"
        >
          {{ nucleo.nome }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-select placeholder="Area" [(ngModel)]="filtroDto.area.id">


        <div class="search-select-header">
          <input
            [(ngModel)]="filterArea.nome"  
            type="search" 
            name="filterArea" 
            placeholder="Search"
            (keydown)="onSearchChange($event)"
            class="search-header-searchbox">
        </div>

        <mat-option *ngFor="let area of filtroDto.areas | namefilter:filterArea" [value]="area.id">
          {{ area.nome }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field>
      <mat-select placeholder="Ano" [(ngModel)]="filtroDto.ano">
        <mat-option *ngFor="let ano of filtroDto.anos" [value]="ano">
          {{ ano }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </mat-card-content>

  <mat-card-actions>
    <button mat-raised-button (click)="getPerfil()">
      <i class="material-icons">undo</i>Voltar
    </button>

    <button
      mat-raised-button
      [disabled]="filtroDto.zona.id < 0"
      (click)="gerarRelatorio()"
    >
      <i class="material-icons">print</i>imprimir
    </button>
  </mat-card-actions>
</mat-card>
<ngx-ui-loader></ngx-ui-loader>

<div class="ng-autocomplete">
  <ng-autocomplete #mydiv
    [data]="filtroDto.zonas"
    [searchKeyword]="keyword"
    placeHolder="Enter the Country Name"
    (selected)="selectEvent($event)"
    (inputChanged)="onChangeSearch($event)"
    (inputFocused)="onFocused($event)"
    historyIdentifier="filtroDto.zonas"
    [itemTemplate]="itemTemplate"
    [notFoundTemplate]="notFoundTemplate"
  >
  </ng-autocomplete>

  <ng-template #itemTemplate let-item>
    <a [innerHTML]="item.nome" ></a>
  </ng-template>

  <ng-template #notFoundTemplate let-notFound>
    <div [innerHTML]="notFound"></div>
  </ng-template>
</div>

<div style="height: 600px;">
  <ng2-pdfjs-viewer #pdfViewer></ng2-pdfjs-viewer>
</div>
